FROM alpine:3.16.2

LABEL tech.laforge.image.authors="SÃ©bastien LAURENT"

RUN apk update
RUN apk add --no-cache bash bind-tools curl openssh openssl tar

RUN curl -LO https://dl.k8s.io/release/v1.25.2/bin/linux/amd64/kubectl && chmod a+x ./kubectl && mv ./kubectl /usr/local/bin
RUN curl -LO https://releases.hashicorp.com/vault/1.13.0/vault_1.13.0_linux_amd64.zip && unzip vault_1.13.0_linux_amd64.zip -d /usr/bin && rm /vault_1.13.0_linux_amd64.zip
RUN curl -L https://github.com/derailed/k9s/releases/download/v0.27.3/k9s_Linux_amd64.tar.gz | tar zx -C /usr/bin k9s

RUN adduser -u 1000 -h /app -D -s /bin/bash tool

WORKDIR /app
USER 1000

COPY bashrc .bashrc

CMD [ "/bin/bash", "-c", "while true; do sleep 365d ; done" ]
